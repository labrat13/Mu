
21 май 2014

Версия 1.0

Описание:
Прототип для первичной сборки и отладки основного функционала и проверки решений

Функциональность:
    - фиксированная альбомная ориентация экрана (со статусбаром)
	- Показ карты на последней использованной позиции
	- Показ компаса по гпс
	- Скроллинг
	- Зум вверх и вниз
	- Показ метки позиции
	- уведомления о включении и выключении гпс


//***************************************************
Версия 1.1

Описание:
Прототип навигатора с минимальным функционалом
 
Функциональность:
    - фиксированная альбомная ориентация экрана (со статусбаром)
	- Показ карты на последней позиции
	- Показ компаса по гпс
	- Скроллинг
	- Зум вверх и вниз
	- Показ метки позиции
	- уведомления о включении и выключении гпс
	- Меню приложения
	  - команда следовать за позицией гпс

//***********************************************************************
Версия 1.2

Описание:
Прототип навигатора с основным набором функций

Функциональность:
   - Фиксированная альбомная ориентация экрана (со статусбаром)
   - Показ последней использованной карты и позиции
   - Показ компаса по гпс и по магнитометру - двойной компас красно-синий
   - Показ масштаба
   - Показ метки позиции
   - Меню приложения
	  - команда следовать за позицией гпс
	  - команды переключения на другие карты
	  
//**********************************************************

- Для следующих версий можно добавить:
 - трекер показывает маршрут на карте с высотой,
 - сохранение отметок о сущностях разных типов в БД и показ их на карте, 
 - создание объектов границ участков как регионов из точек позиций, соединенных прямыми линиями, с описаниями и хранение их в БД. 
    (широту долготу и высоту, отмечать границы участка на местности и там что-то планировать - разметка участка по гпс - но точность низкая)
 - отображение данных с гироскопа о линейном ускорении,
 - отображение ориентации в пространстве с учетом калибровочной позиции
 - поправку для гпс координат
 - создание скриншота навигатора и сохранение его в устройстве как картинки.
 - загрузку из интернета и сохранение тил в устройстве
	  
//****************************************************************************************************	  
- приложение после старта отображает
  - карту во весь экран (какую именно? - последнюю использованную), на той позиции (lat-lon-z), где пользователь ее оставил ранее.
  - значок компаса в верхнем левом углу, компас вращается соответственно положению устройства по ГПС и по датчикам ориентации устройства (компас с двумя стрелками?)
  - шкала масштаба в нижнем правом углу, на прямоугольном фоне со скругленными углами светло-серого цвета
  - метка текущей позиции от ГПС. Флажок красного цвета, не указывает направление.
- пользователь может прокручивать карту (скролл)
- пользователь может зумить карту - растягивать или сжимать (пинч) в некоторой точке экрана.  
  При этом точка центра пинча на карте остается в той же точке экрана, где и была.
- пользователь может видеть положение от ГПС, оно отображается флажком красного цвета. Положение не обязательно находится на экране.
  (требуется команда перехода к текущей позиции ГПС) Отображаемый прямоугольник карты имеет центральную точку (экрана), она собственно и перемещается при скроллинге.
- команды подаются через меню
  - меню приложения вызывается нажатием кнопки на устройстве
    - команды для переключения типов карт (как переключение реализовать? сменить View или LocalTileStore?). При смене карты позиция и масштаб должны остаться неизменными.
    - команда следования за позицией гпс. Нормально навигатор находится в режиме следования, следует за позицией гпс, она всегда находится в центре экрана.
       Но если пользователь скроллит карту или вызывает контекстное меню, то навигатор выходит из режима следования за гпс. 
       Пользователь дает команду перейти к текущей позиции, и навигатор снова входит в режим следования.
       Зум в точке позиции (в некотором прямоугольнике вокруг нее) не прерывает режим следования. (Но зум всегда сопровождается скроллом, так что это сложно)
       Зум в другой точке выводит навигатор из режима следования.
       Навигатор не возвращается в режим следования автоматически.  
       Режим следования сохранять при выключении программы?
       Так, если режим следования включен, то сохранять позицию не имеет смысла - навигатор сразу перейдет к текущей позиции.
       Чтобы сохранить предыдущую позицию, надо выйти из режима следования, и тогда закрыть приложение.
       - есть лучше вариант - при старте приложения режим следования выключен, просто показывается старое положение.
       Пользователь командует включить режим следования, и приложение переходит к текущей точке. и начинает за ней идти.
       Скролл или зум не в точке текущей позиции прерывает режим следования, следование прекращается.    
  - контекстное меню вызывается длинным кликом в некоторой точке экрана
    - команда создать метку на карте - в следующей версии
      - неудобно - меню перекрывает экран и пользователь теряет зрительный контекст. Лучше нарисовать в центре экрана крестик,
         пользователь подгонит туда карту и тогда вызовет меню приложения и выберет пункт поставить метку. 
         Метки удобно рисовать цветными кружками, чтобы в них можно было ткнуть пальцем коротким кликом и получить информацию.
    - команда выхода из меню - не нужна, можно кликнуть по остальной части экрана
  /*******************************************************************************************************************************
  отображение масштаба карты
  - типично масштаб состоит из:
    - прямоугольник фона
    - горизонтальная линия масштаба с засечками по концам
    - надписи о длине в метрах или километрах
    - номера слоя
  - длину линии масштаба, номер слоя и длину в метрах надо хранить в файле в каталоге карты, так как эти величины зависят от типа карты.
  - предлагается вписать эти величины обычным текстом в файл, а потом поместить файл на карту, читать оттуда и хранить в памяти в виде массива.
     - по этим данным отрисовывать картинку слоя и хранить опять же в памяти, а отрисовывать готовую картинку.
     - обновлять картинку по событию зума или при отрисовке проверять номер слоя на соответствие последнему запомненному, и если не совпадает, то создать картинку.     
    